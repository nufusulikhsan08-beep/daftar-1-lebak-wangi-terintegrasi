# /etc/cron.d/daftar1-lebakwangi

# Run Laravel scheduled tasks every minute
* * * * * www-data cd /var/www/daftar1-lebakwangi/backend && php artisan schedule:run >> /dev/null 2>&1

# Daily backup at 2:00 AM
0 2 * * * www-data cd /var/www/daftar1-lebakwangi/backend && php artisan backup:run >> /var/log/daftar1/backup.log 2>&1

# Weekly cleanup of old backups (Sunday at 3:00 AM)
0 3 * * 0 www-data find /var/www/daftar1-lebakwangi/backend/storage/backups -name "*.zip" -mtime +30 -delete >> /var/log/daftar1/cleanup.log 2>&1

# Daily log rotation check
0 4 * * * www-data logrotate /etc/logrotate.d/daftar1 >> /var/log/daftar1/logrotate.log 2>&1